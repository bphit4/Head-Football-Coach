{% include "../../static/html_templates/ext_NavBar.html" %}

<head>

  <style media="screen">
    .GameHeadlineDisplay {
      background: linear-gradient(to right,#{{awayTeam.TeamColor_Primary_HEX}},#{{homeTeam.TeamColor_Primary_HEX}});
    }

     .away-drop-shadow {
         box-shadow: 0 2px 4px 0 #{{game.away_team_game.team_season.team.team_color_primary_hex}}, 0 2px 8px 0 #{{game.away_team_game.team_season.team.team_color_primary_hex}}
     }

      .home-drop-shadow {
          box-shadow: 0 2px 4px 0 #{{game.home_team_game.team_season.team.team_color_primary_hex}}, 0 2px 8px 0 #{{game.home_team_game.team_season.team.team_color_primary_hex}}
      }
  </style>
  <style media="screen">
    .away-team-primary-background-bar {
      background-color: #{{game.away_team_game.team_season.team.team_color_primary_hex}} !important;
      color: #{{game.away_team_game.team_season.team.team_color_primary_hex|TeamBackgroundFontColor}} !important;
      font-size: 12.5px;
      font-weight: bold;
      padding: 8px 16px;
      border-top: 4px solid #{{game.away_team_game.team_season.team.team_color_secondary_hex|TeamSecondaryColor}} !important;
    }

    .home-team-primary-background-bar {
      background-color: #{{game.home_team_game.team_season.team.team_color_primary_hex}} !important;
      color: #{{game.home_team_game.team_season.team.team_color_primary_hex|TeamBackgroundFontColor}} !important;
      font-size: 12.5px;
      font-weight: bold;
      padding: 8px 16px;
      border-top: 4px solid #{{game.home_team_game.team_season.team.team_color_secondary_hex|TeamSecondaryColor}} !important;
    }


    .team-primary-background-bar {
      background-color: #{{page.PrimaryColor}} !important;
      color: #{{page.PrimaryColor|TeamBackgroundFontColor}} !important;
      font-size: 12.5px;
      font-weight: bold;
      padding: 8px 16px;
      border-top: 4px solid #{{page.SecondaryColor|TeamSecondaryColor}} !important;
    }

    .drive-event-bar button.w3-bar-item.w3-button:hover {
      background-color: inherit !important;
      color: #FFF !important;
    }
  </style>
</head>
<body>
  <div class='PageContent'>

    <div class="">
      <div class="w3-row-padding GameHeadlineDisplay">
        {{game.game_headline_display}}
      </div>
      <div class='w3-row height-150'>
        <div class="w3-col s5 gameHeaderTeamContent away height100 padding-20-10" style=''>
          <div class="w3-row-padding height100" style='border-radius: 10px 0px 0px 10px; color: white; background-color: #{{game.away_team_game.team_season.team.team_color_primary_hex}}'>
            <div class="w3-col s7 gameHeaderTeamContainer gameSchoolName gameTeamName">
              <div class="gameHeaderTeamContainerInfo">
                <div class="gameHeaderTeamContainerName">
                  <div class="">
                    {{game.away_team_game.team_season.national_rank_display}}
                    <span class='gameOutcome{{game.away_outcome_letter}}'>{{game.away_team_game.team_season.team.school_name}}</span>
                  </div>
                </div>
                <div class="gameHeaderTeamContainerRecord">
                  {{game.away_team_game.team_season.record_display}}
                </div>
              </div>
            </div>
            <div class="w3-col s2">
              <a href="{{game.away_team_game.team_season.team.team_href}}"><img class='worldTeamLogo' src='{{game.away_team_game.team_season.team.team_logo}}' alt="My image"></a>
            </div>
            <div class="w3-col s2 gameHeaderScoreContainer gameOutcome{{game.away_outcome_letter}}">
              {% if game.was_played == 1 %}
                {{game.scoring.final[0]}}
              {% endif %}
            </div>
          </div>

        </div>

        <div class='w3-col s2 text-center height100'>
          {% if game.was_played == 1 %}
          <table class='gameBoxScoreTable w3-table-all'>
            <thead>
              <th>{{game.week.week_name}}</th>
              {% for period in game.scoring.periods %}
              <th class='w3-center'>{{period.period_number}}</th>
              {% endfor %}
            </thead>
            <tr>
              <td class='gameBoxScoreTeamName colgroup-border-right'>{{game.away_team_game.team_season.team.team_abbreviation}}</td>
              {% for period in game.scoring.periods %}
              <td class='w3-center'>{{period.points[0]}}</td>
              {% endfor %}
            </tr>
            <tr>
              <td class='gameBoxScoreTeamName colgroup-border-right'>{{game.home_team_game.team_season.team.team_abbreviation}}</td>
              {% for period in game.scoring.periods %}
              <td class='w3-center'>{{period.points[1]}}</td>
              {% endfor %}
            </tr>
          </table>
          {% else %}
          <div class="width100 height100">
            <table class="width100">
              <tbody>
                <tr>
                  <td class='font16'>{{game.week.week_name}}</td>
                </tr>
                <tr>
                  <td class='font16'>{{game.home_team_game.team_season.team.location.city}}, {{game.home_team_game.team_season.team.location.state}}</td>
                </tr>
              </tbody>
            </table>
          </div>
          {% endif %}

        </div>

        <!--
        <div class="w3-col s2 text-center height100">
          <div class="w3-row-padding height80 centered-item">
            <div class="w3-col s10 centered-item">
                <span class='font20 bold'>FINAL</span>
            </div>

          </div>
        </div>
        -->
        <div class="w3-col s5 gameHeaderTeamContent home height100 padding-20-10"  style=''>
          <div class="w3-row-padding height100" style='border-radius: 0px 10px 10px 0px; color: white; background-color: #{{game.home_team_game.team_season.team.team_color_primary_hex}}'>
            <div class="w3-col s2 gameHeaderScoreContainer gameOutcome{{game.home_outcome_letter}}">
              {% if game.was_played == 1 %}
                {{game.scoring.final[1]}}
              {% endif %}
            </div>
            <div class="w3-col s2">
              <a href="{{game.home_team_game.team_season.team.team_href}}"><img class='worldTeamLogo' src='{{game.home_team_game.team_season.team.team_logo}}' alt="My image"></a>
            </div>
            <div class="w3-col s7 gameHeaderTeamContainer gameSchoolName gameTeamName">
              <div class="gameHeaderTeamContainerInfo">
                <div class="gameHeaderTeamContainerName">
                  <div class="">
                    {{game.home_team_game.team_season.national_rank_display}}
                    <span class='gameOutcome{{game.home_outcome_letter}}'>{{game.home_team_game.team_season.team.school_name}}</span>
                  </div>
                </div>
                <div class="gameHeaderTeamContainerRecord">
                  {{game.home_team_game.team_season.record_display}}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <nav>
        <div class="w3-bar team-bar" id="nav-tab" style="background-color: #{{page.PrimaryColor}}; border-bottom: 3px solid #{{page.SecondaryColor}}; border-top: 3px solid #{{page.SecondaryColor}};  color: white; ">
          <button class='w3-bar-item w3-button tab nav-tab-button show-small'  id="nav-sidebar-tab" style="">
              <i class="fas fa-bars"></i>
          </button>
          <button class="w3-bar-item w3-button tab nav-tab-button selected-tab"  id="nav-overview-tab" style="background-color: #{{page.SecondaryColor}};">Overview</button>
          {% if game.was_played %}
          <button class="w3-bar-item w3-button tab nav-tab-button"  id="nav-boxscore-tab">Box Score</button>
          {% endif %}
        </div>
      </nav>
      <div class="" id="nav-tabContent">
        <div class="tab-pane show active tab-content" id="nav-overview">
          <div class="w3-display-container">
            <div class="w3-row-padding">
              {% if show_stat_box or last_team_meetings|length > 0%}

              <div class='w3-col l3 m4'>
                {% if show_stat_box %}
                <div class='w3-card w3-margin-bottom'>
                  <div class="w3-bar team-primary-background-bar">
                    {% if game.was_played%}
                    <span>Team Stats {{TeamStatHeaderSuffix}}</span>
                    {% else %}
                    <span>Team Ratings</span>
                    {% endif%}
                  </div>

                  {% if game.was_played%}
                  <div class='equal-sized-item-container wrap'>
                    {% for stat in team_stat_box %}
                    <div class='w3-padding-4 s6 ellipsis equal-sized-item inline-block w3-border-top game-recap-stat-box w3-border-gray'>
                      <span class='bold font12 '>{{stat.display_name}}</span>
                      <div class='gameTeamStatAbbreviation'>{{game.away_team_game.team_season.team.team_abbreviation}}</div>
                      <div class="">
                        <span style="background-color:#f2f2f2;" class="bar-total"><span style="background-color:#{{game.away_team_game.team_season.team.team_color_primary_hex}} !important; height: 8px; width:{{stat.away_ratio}}%" class=" bar-percentage"></span></span>
                        <span class='font12'>{{stat.away_display_value}}</span>
                      </div>
                      <div class="">
                        <span style="background-color:#f2f2f2;" class="bar-total"><span style="background-color:#{{game.home_team_game.team_season.team.team_color_primary_hex}} !important; height: 8px; width:{{stat.home_ratio}}%" class=" bar-percentage"></span></span>
                        <span class='font12'>{{stat.home_display_value}}</span>
                      </div>
                      <div class='gameTeamStatAbbreviation'>{{game.home_team_game.team_season.team.team_abbreviation}}</div>
                    </div>
                    {% endfor %}
                  </div>
                  {% else %}
                  <div class="">

                  </div>
                  {% endif %}
                </div>
                {% endif %}

                {% if game.was_played == 0 %}
                {% if last_team_meetings|length > 0 %}

                <div class="w3-card">
                  <div class="w3-bar team-primary-background-bar">
                    <span>Past Meetings</span>
                  </div>
                  <table class='w3-table-all'>
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Week</th>
                        <th>Winner</th>
                        <th>Score</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for GamePlayed in LastTeamMeetings%}
                      <tr>
                        <td>{{GamePlayed.GameOrderRank}}</td>
                        <td>{{GamePlayed.WeekName}}, {{GamePlayed.Year}}</td>

                        <td class='bold' style='background-color: #{{GamePlayed.WinningTeamPrimaryColor}}; color: #{{GamePlayed.WinningTeamSecondaryColor}};'>
                          {{GamePlayed.WinningTeamName}}
                        </td>
                        <td>
                          <a href="{{GamePlayed.GameHref}}">
                            {{GamePlayed.ScoreDisplay}}
                          </a>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
                {% endif %}
                {% else %}
                <div class="w3-card margin-bottom-24">
                  <div class="w3-bar team-primary-background-bar">
                    <span>Team Leaders</span>
                  </div>
                  <div class="">
                    <table style='width: 100%;'>
                      {% for LeaderGroup in PlayerGameLeaders%}
                      <tr class='center-text-row w3-border-top'>
                        <td colspan='4' class='padding-top-8 bold'>{{LeaderGroup.Display}}</td>
                      </tr>
                      <tr class='center-text-row'>
                        <td colspan='2'>
                          <span class='font12'>
                            <a href="{{LeaderGroup.HomePlayer.PlayerHref}}">
                              {{LeaderGroup.HomePlayer.PlayerTeamSeasonID__PlayerID__PlayerFirstName}} {{LeaderGroup.HomePlayer.PlayerTeamSeasonID__PlayerID__PlayerLastName}}
                            </a>
                          </span>
                        </td>
                        <td colspan='2'>
                          <span class='font12'>
                            <a href="{{LeaderGroup.AwayPlayer.PlayerHref}}">
                              {{LeaderGroup.AwayPlayer.PlayerTeamSeasonID__PlayerID__PlayerFirstName}} {{LeaderGroup.AwayPlayer.PlayerTeamSeasonID__PlayerID__PlayerLastName}}
                            </a>
                          </span>
                        </td>
                      </tr>
                      <tr class='padding-bottom-8'>
                        <td>
                          <div class="PlayerFace-45 PlayerFace-Headshot">
                            {{LeaderGroup.HomePlayer.PlayerTeamSeasonID__PlayerID__PlayerFaceSVG|safe}}
                          </div>
                        </td>
                        <td>
                          <ul class='no-list-style right-text'>
                            {% for Stat in LeaderGroup.HomePlayerStats%}
                            <li>
                              {{Stat}}
                            </li>
                            {% endfor %}
                          </ul>
                        </td>
                        <td>
                          <ul class='no-list-style'>
                            {% for Stat in LeaderGroup.AwayPlayerStats%}
                            <li>
                              {{Stat}}
                            </li>
                            {% endfor %}
                          </ul>
                        </td>
                        <td>
                          <div class="PlayerFace-45 PlayerFace-Headshot">
                            {{LeaderGroup.AwayPlayer.PlayerTeamSeasonID__PlayerID__PlayerFaceSVG|safe}}
                          </div>
                        </td>
                      </tr>
                      {%endfor%}
                    </table>
                                      </div>
                </div>
                {% endif %}

              </div>
              {%endif%}
              <div class='w3-col l6 m8'>
                {% if game.was_played %}

                <div class="w3-card w3-margin-bottom">
                  <div class="">
                    <div class="w3-bar team-primary-background-bar drive-event-bar">
                      <div class='w3-bar-item  margin-right-12 no-padding'>Scoring Summary</div>
                      <button class="w3-bar-item margin-right-12 w3-button tab no-padding selected-drive-event-tab" id="DriveEndingEvent-Score-tab">Scoring Drives</button>
                      <button class="w3-bar-item margin-right-12 w3-button tab no-padding " id="DriveEndingEvent-All-tab">All Drives</button>
                    </div>
                    <table class='no-border w3-table-all' style='width: 100%;'>
                      <tbody>
                        {% for period in game.scoring.periods %}
                          <tr class='ScoringSummaryQuarterHeader'>
                            <th colspan='4'>{{period.period_number}}</th>
                            <th class='ScoringSummaryTeamScore center-text'>{{game.home_team_game.team_season.team.team_abbreviation}}</th>
                            <th class='ScoringSummaryTeamScore center-text'>{{game.away_team_game.team_season.team.team_abbreviation}}</th>
                          </tr>
                          {% for drive in period.drives %}
                          <tr class='ScoringSummaryScoreRow {{drive.drive_end.drive_event_class}}' style='background-color: {{drive.drive_end.display_team.team_color_primary_hex|Color_RGB_With_Opacity}}'>
                            <td class='ScoringSummaryTeamLogo column-shrink' style='background-color: #{{drive.drive_end.display_team.team_color_primary_hex}}'>
                                <img src="{{drive.drive_end.display_team.team_logo}}" alt="">
                            </td>
                            <td class="">
                              {{drive.drive_end.play_type}}
                            </td>
                            <td class="">
                              {{drive.drive_end.display_time}}
                            </td>
                            <td class="ScoringSummaryDrive">
                              <div class="">
                                {{drive.drive_end.play_description}}
                              </div>
                              <div class="ScoringSummaryDriveDescription">
                                {{drive.drive_end.drive_description}}
                              </div>
                            </td>
                              <td class='ScoringSummaryTeamScore {{drive.drive_end.home_team_bold}} center-text'>{{drive.drive_end.home_team_points}}</td>
                              <td class='ScoringSummaryTeamScore {{drive.drive_end.away_team_bold}} center-text'>{{drive.drive_end.away_team_points}}</td>
                          </tr>
                          {% endfor %}
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
                <div  class='w3-card w3-margin-bottom' id="GameFlowChart"></div>
                {% else %}
                <div class="w3-card w3-margin-bottom">
                  <div class="w3-row" style='height: 400px;'>
                    <div class="w3-col s2 height100 white-text center-text" style=' background-color: #{{game.away_team_game.team_season.team.team_color_primary_hex}}'>
                      <div class="font20">
                        {{game.away_team_game.team_season.team.team_abbreviation}}
                      </div>
                      <div class="w3-padding" style='border-top: 1px solid white;'>
                        <div class="font16 ">
                          {{game.away_team_game.team_season.rating.overall|int}}
                        </div>
                        <div class="">
                          OVR
                        </div>
                      </div>
                      <div class="w3-padding" style='border-top: 1px solid white;'>
                        <div class="font16">
                          {{game.away_team_game.team_season.rating.by_position_group.Offense|int}}
                        </div>
                        <div class="">
                          OFF
                        </div>
                      </div>
                      <div class="w3-padding" style='border-top: 1px solid white;'>
                        <div class="font16">
                          {{game.away_team_game.team_season.rating.by_position_group.Defense|int}}
                        </div>
                        <div class="">
                          DEF
                        </div>
                      </div>
                    </div>
                    <div class="w3-col s8">
                      <div id="team-ratings-chart" class='' >
                      </div>
                    </div>
                    <div class="w3-col s2 height100 white-text center-text" style=' background-color: #{{game.home_team_game.team_season.team.team_color_primary_hex}}'>
                      <div class="font20">
                        {{game.home_team_game.team_season.team.team_abbreviation}}
                      </div>
                      <div class="w3-padding" style='border-top: 1px solid white;'>
                        <div class="font16 ">
                          {{game.home_team_game.team_season.rating.overall|int}}
                        </div>
                        <div class="">
                          OVR
                        </div>
                      </div>
                      <div class="w3-padding" style='border-top: 1px solid white;'>
                        <div class="font16">
                          {{game.home_team_game.team_season.rating.by_position_group.Offense|int}}
                        </div>
                        <div class="">
                          OFF
                        </div>
                      </div>
                      <div class="w3-padding" style='border-top: 1px solid white;'>
                        <div class="font16">
                          {{game.home_team_game.team_season.rating.by_position_group.Defense|int}}
                        </div>
                        <div class="">
                          DEF
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="w3-card w3-margin-bottom">
                  <table class='w3-table w3-striped'>
                    <thead>
                      <tr class=' team-primary-background-bar'>
                        <th class='right-text '>OVR</th>
                        <th class='right-text '>{{game.away_team_game.team_season.team.school_name}}</th>
                        <th class='center-text '></th>
                        <th class='center-text '>Pos</th>
                        <th class='center-text '></th>
                        <th class=' '>{{game.home_team_game.team_season.team.school_name}}</th>
                        <th class=' '>OVR</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for players in player_talent_comparison%}
                      <tr>

                        <td class='right-text font16 column-shrink'>{{players.away_player_team_season.ratings.overall.overall}}</td>
                        <td class='right-text font16'>
                          <a href="{{players.away_player_team_season.player.player_href}}">
                          {{players.away_player_team_season.player.full_name}}
                          </a>
                          <div class="teamStarterPlayerFace inline-block" id="teamStarterPlayerFace{{forloop.counter}}" PlayerFaceJson="{{Players.AwayPlayer.PlayerTeamSeasonID__PlayerID__PlayerFaceJson|safe}}" HasPlayerFaceJSON="{%if Players.AwayPlayer.PlayerTeamSeasonID__PlayerID__PlayerFaceJson|length > 0%}1{%else%}0{%endif%}" >
                              <div id="playerFace{{forloop.counter}}" class="PlayerFaceDisplay">

                              </div>
                          </div>
                        </td>
                        <td style='font-size: 24px; color:white; background-color:#{{players.away_player_team_season.advantage_color}}' class='center-text font24 nowrap'>
                          <span>{{players.away_player_team_season.advantage_icon|safe}}</span>
                          {% if players.away_player_team_season.advantage_logo_url%}
                          <img src="{{players.away_player_team_season.advantage_logo_url}}" class='logo-30' alt="">
                          {% endif %}
                        </td>
                        <td style='' class='center-text font16'><span>{{players.position}}</span></td>
                        <td style='font-size: 24px; color:white; background-color:#{{players.home_player_team_season.advantage_color}}' class='center-text font24 nowrap'>
                          {% if players.home_player_team_season.advantage_logo_url%}
                          <img src="{{players.home_player_team_season.advantage_logo_url}}" class='logo-30' alt="">
                          {% endif %}
                          <span>{{players.home_player_team_season.advantage_icon|safe}}</span>
                        </td>
                        <td class='left-text font16'>
                          <div class="teamStarterPlayerFace inline-block" id="teamStarterPlayerFace-{{forloop.counter}}" PlayerFaceJson="{{Players.HomePlayer.PlayerTeamSeasonID__PlayerID__PlayerFaceJson|safe}}" HasPlayerFaceJSON="{%if Players.HomePlayer.PlayerTeamSeasonID__PlayerID__PlayerFaceJson|length > 0%}1{%else%}0{%endif%}" >
                              <div id="playerFace{{forloop.counter}}" class="PlayerFaceDisplay">

                              </div>
                          </div>
                          <a href="{{players.home_player_team_season.player.player_href}}">
                          {{players.home_player_team_season.player.full_name}}
                          </a>
                        </td>
                        <td class='left-text font16  column-shrink'>{{players.home_player_team_season.ratings.overall.overall}}</td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
                {% endif %}
              </div>
              <div class='w3-col l3 m6'>
                {% for conference in conference_standings %}
                <div class="w3-card margin-bottom-12">
                  <div class="w3-bar team-primary-background-bar">
                    <span>{{conference.conference_name}} Standings</span>
                  </div>
                  <table class='w3-table-all no-border' id='teamOverviewConferenceStandings'>
                    <thead>
                      <th colspan='2'>Team</th>
                      <th>Conf</th>
                      <th>GB</th>
                      <th>Record</th>
                    </thead>
                    {% for standing_team in conference.conference_standings %}
                    <tr class='{{standing_team.bold}}'>
                      <td class='column-shrink padding-left-8' style='background-color: #{{standing_team.team.team_color_primary_hex}}'>
                        <a href="{{standing_team.team.team_href}}">
                          <img class='teamOverviewConferenceStandingsTeamLogo' src="{{standing_team.team.team_logo_50}}" />
                        </a>
                      </td>
                      <td>
                        <a href="{{standing_team.team.team_href}}">
                          <span class='font10'>{{standing_team.national_rank_display}} </span>
                          <span>{{standing_team.team.team_abbreviation }}</span>
                        </a>
                      </td>
                      <td>{{standing_team.conference_record_display}}</td>
                      <td>{{standing_team.record.conference_gb}}</td>
                      <td>{{standing_team.record_display}}</td>
                    </tr>
                    {% endfor %}
                  </table>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-pane tab-content" style='display:none;' id="nav-boxscore">
          <div class='w3-container'>
            {% for stat_grouping in box_score_stat_groupings %}
            <div class='w3-row-padding'>
              <div class='w3-col s5 gamePlayerBoxStats w3-card away-drop-shadow margin-bottom-12 height100 no-padding'>
                <div class="w3-bar away-team-primary-background-bar">
                  <span>{{game.away_team_game.team_season.team.school_name}} {{stat_grouping.stat_group_name}}</span>
                </div>
                <table id='away-box-score-{{stat_grouping.stat_group_name}}' class='w3-table-all no-border'>
                  <thead>
                  </thead>
                </table>
              </div>
              <div class='w3-col s5 gamePlayerBoxStats w3-card home-drop-shadow margin-bottom-12 height100 no-padding'>
                <div class="w3-bar home-team-primary-background-bar">
                  <span>{{game.home_team_game.team_season.team.school_name}} {{stat_grouping.stat_group_name}}</span>
                </div>
                <table id='home-box-score-{{stat_grouping.stat_group_name}}' class='w3-table-all no-border'>
                  <thead>
                  </thead>
                </table>
              </div>

            </div>
            {% endfor %}

          </div>
        </div>
      </div>

    </div>
  </div>
</body>
